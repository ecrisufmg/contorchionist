#N canvas 877 100 984 490 12;
#X declare -lib timbreIDLib;
#X declare -path ..;
#N canvas 1222 126 946 765 classification 0;
#X obj 100 101 cnv 2 350 2 empty empty CLASSIFICATION 5 12 0 14 #606060 #404040 0;
#X obj 100 177 cnv 2 350 2 empty empty empty 0 12 0 12 #606060 #404040 0;
#X obj 36 13 inlet;
#X text 526 305 0 = agogo;
#X text 526 325 1 = berimbau;
#X msg 533 279 berimbau;
#N canvas 294 104 697 646 class 0;
#X obj 277 271 outlet;
#X obj 281 112 inlet;
#X obj 281 135 sel 0 1;
#X msg 371 213 set berimbau;
#X msg 279 211 set agogÃ´;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 2 1 3 0;
#X connect 3 0 0 0;
#X connect 4 0 0 0;
#X restore 533 256 pd class;
#X listbox 108 150 10 0 0 2 classification - - 16;
#X obj 264 251 unpack f f;
#X floatatom 246 372 5 0 0 1 classification - - 0;
#X obj 246 348 expr if ($f1 > $f2 \, 0 \, 1);
#X obj 313 300 f;
#X obj 246 302 f;
#X obj 218 227 t b b l;
#X msg 63 201 0.3 0.7;
#X msg 61 274 0.8 0.2;
#X obj 145 70 cyclone/maximum;
#X floatatom 305 150 11 0 0 2 probability - - 16;
#X text 419 156 %;
#X obj 36 38 route forward loss;
#X obj 665 132 array set loss;
#X obj 665 61 t l l;
#X obj 697 83 list length;
#X obj 697 106 array size loss;
#X connect 2 0 19 0;
#X connect 6 0 5 0;
#X connect 6 0 7 0;
#X connect 8 0 12 1;
#X connect 8 1 11 1;
#X connect 10 0 9 0;
#X connect 10 0 6 0;
#X connect 11 0 10 1;
#X connect 12 0 10 0;
#X connect 13 0 12 0;
#X connect 13 1 11 0;
#X connect 13 2 8 0;
#X connect 14 0 13 0;
#X connect 15 0 13 0;
#X connect 16 0 17 0;
#X connect 19 0 13 0;
#X connect 19 0 16 0;
#X connect 19 1 21 0;
#X connect 21 0 20 0;
#X connect 21 1 22 0;
#X connect 22 0 23 0;
#X coords 0 -1 1 1 350 80 2 100 100;
#X restore 283 335 pd classification;
#N canvas 824 98 1264 682 real-time-analysis 0;
#N canvas 339 182 793 521 live-onset 0;
#X obj 191 244 bark~ 1024 64 1;
#X msg 425 115 mask 4 0.75;
#X msg 435 191 filter_range 0 20;
#X obj 353 34 loadbang;
#X obj 191 267 outlet;
#X msg 437 231 minvel 2;
#X obj 529 85 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 529 105 loudness \$1;
#X obj 633 86 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 633 106 filter_avg \$1;
#X msg 412 72 thresh -1 6.5;
#X obj 188 72 r~ sig1;
#X msg 430 151 debounce 300;
#X connect 0 0 4 0;
#X connect 1 0 0 0;
#X connect 2 0 0 0;
#X connect 3 0 10 0;
#X connect 3 0 12 0;
#X connect 3 0 2 0;
#X connect 3 0 1 0;
#X connect 3 0 5 0;
#X connect 3 0 6 0;
#X connect 3 0 8 0;
#X connect 5 0 0 0;
#X connect 6 0 7 0;
#X connect 8 0 9 0;
#X connect 10 0 0 0;
#X connect 11 0 0 0;
#X connect 12 0 0 0;
#X restore 311 120 pd live-onset;
#X obj 179 16 r~ sig1;
#X obj 636 210 f;
#X obj 717 219 + 1;
#X obj 706 192 sel 0;
#X msg 658 184 0;
#X obj 534 557 print analisys;
#X obj 534 164 t l b, f 15;
#X obj 706 256 mod 21;
#X obj 657 162 loadbang;
#X obj 592 349 sel 11;
#X msg 592 376 1;
#X obj 544 348 sel 1;
#X msg 544 372 0;
#X obj 534 472 list append 0;
#X obj 593 528 text set \$0-dataset;
#X obj 534 71 spigot;
#X obj 573 21 r training-data;
#X obj 635 47 == 0;
#X obj 596 73 spigot;
#X obj 673 317 s bang-datasize;
#X obj 596 122 s \$0-perceptron;
#X obj 596 99 list append 0;
#X obj 673 295 sel 20;
#X floatatom 429 74 5 0 0 0 - - - 0;
#X obj 179 147 mfcc~ 1024 180;
#X obj 208 83 loadbang;
#X msg 208 106 normalize 1;
#X obj 219 196 s \$0-class;
#X obj 179 171 list split 1;
#X connect 0 0 25 0;
#X connect 1 0 25 0;
#X connect 2 0 3 0;
#X connect 2 0 12 0;
#X connect 2 0 10 0;
#X connect 2 0 15 1;
#X connect 2 0 23 0;
#X connect 3 0 8 0;
#X connect 4 0 5 0;
#X connect 5 0 2 0;
#X connect 7 0 14 0;
#X connect 7 1 2 0;
#X connect 8 0 2 1;
#X connect 8 0 4 0;
#X connect 9 0 5 0;
#X connect 10 0 11 0;
#X connect 11 0 14 1;
#X connect 12 0 13 0;
#X connect 13 0 14 1;
#X connect 14 0 6 0;
#X connect 14 0 15 0;
#X connect 16 0 7 0;
#X connect 17 0 16 1;
#X connect 17 0 18 0;
#X connect 17 0 24 0;
#X connect 18 0 19 1;
#X connect 19 0 22 0;
#X connect 22 0 21 0;
#X connect 23 0 20 0;
#X connect 25 0 29 0;
#X connect 26 0 27 0;
#X connect 27 0 25 0;
#X connect 29 1 28 0;
#X restore 753 38 pd real-time-analysis;
#X obj 23 108 bng 19 250 50 0 empty empty 1\ -\ add\ layers\ to\ torch.sequential\ module 0 -9 0 12 #00ff04 #000000 #000000;
#X obj 342 106 bng 19 250 50 0 empty empty 2\ -\ train\ the\ model 0 -9 0 12 #00ff04 #000000 #000000;
#X msg 658 170 clear;
#X msg 654 146 info;
#X obj 640 196 s \$0-class;
#X obj 342 158 s \$0-class;
#X obj 283 257 r \$0-class;
#X obj 507 106 bng 19 250 50 0 empty empty 3\ -\ classify 0 -9 0 12 #00ff04 #000000 #000000;
#X obj 507 129 s play;
#X msg 41 301 add class;
#X msg 97 155 add class;
#X msg 60 253 add class;
#X msg 78 203 add class;
#N canvas 1028 171 675 355 init 0;
#X obj 13 84 openpanel;
#N canvas 729 256 1606 738 sound 0;
#X obj 51 119 soundfiler;
#X obj 51 40 t a b;
#X obj 51 16 inlet;
#X obj 51 69 pack s f \$0;
#X floatatom 198 162 15 0 0 1 samples - - 0;
#X obj 198 185 / 44100;
#X floatatom 199 207 15 0 0 1 segundos - - 0;
#X msg 51 96 read -resize \$1 \$3-sound2;
#X obj 49 171 table \$0-sound2;
#X obj 444 59 f \$0;
#X obj 444 41 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 414 -4 loadbang;
#X obj 414 255 print loaded;
#X obj 414 20 t b b;
#X msg 415 232 classification audio;
#X obj 523 33 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 645 246 tabplay~ \$0-sound2;
#X msg 675 220 stop;
#X msg 645 193 bang;
#X obj 645 270 s~ sig1;
#X obj 788 247 r~ sig1;
#X obj 788 271 dac~;
#X obj 624 153 r play;
#X msg 444 81 read -resize ../resources/audio/ago_berim_class_44100.wav \$1-sound2;
#X connect 0 0 4 0;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 7 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 7 0 0 0;
#X connect 9 0 23 0;
#X connect 10 0 9 0;
#X connect 11 0 13 0;
#X connect 13 0 14 0;
#X connect 13 1 10 0;
#X connect 14 0 12 0;
#X connect 15 0 13 0;
#X connect 16 0 19 0;
#X connect 17 0 16 0;
#X connect 18 0 16 0;
#X connect 20 0 21 0;
#X connect 20 0 21 1;
#X connect 22 0 16 0;
#X connect 23 0 0 0;
#X restore 13 105 pd sound;
#X obj 13 62 bng 19 250 50 0 empty empty load_sound_file 20 9 0 12 #00ff04 #000000 #000000;
#X obj 10 137 declare -lib timbreIDLib;
#X obj 9 160 declare -path ..;
#X msg 222 142 info;
#X obj 222 70 r \$0-param;
#X obj 222 178 s \$0-class;
#X obj 269 241 torch.ls2tensor mfcc -shape 20 21 -t 2 -mout -v;
#X obj 222 92 t b b b;
#X msg 245 117 dataset mfcc;
#X msg 269 216 load ../resources/data/20-mfcc-data.txt;
#X connect 0 0 1 0;
#X connect 2 0 0 0;
#X connect 5 0 7 0;
#X connect 6 0 9 0;
#X connect 9 0 5 0;
#X connect 9 1 10 0;
#X connect 9 2 11 0;
#X connect 10 0 7 0;
#X connect 11 0 8 0;
#X restore 753 16 pd init;
#X msg 342 133 train 700;
#X obj 41 326 torch.activation softmax 2;
#X obj 78 228 torch.activation relu 8;
#X text 322 16 INSTRUMENT CLASSIFICATION (BERIMBAU AND AGOGO);
#X msg 640 120 init xavier_uniform;
#X obj 97 178 torch.linear -in 19 -out 8 -b;
#X obj 60 276 torch.linear -in 8 -out 2 -b;
#N canvas 555 291 450 278 (subpatch) 0;
#X array loss 70 float 4;
#A color 0;
#A width 1;
#X coords 0 0.25 69 0 290 149 1 0 0;
#X restore 654 265 graph;
#X obj 23 351 s \$0-param;
#X obj 23 133 t b b b b b;
#X text 691 145 print info;
#X text 700 169 clear the torch.sequential module;
#X text 779 120 re-initialize the weights;
#X obj 283 280 torch.sequential class -opt adam -lr 0.001 -loss mse -target -init hu -nl relu ns 0.01 seed 42 -outloss -v, f 49;
#X connect 2 0 25 0;
#X connect 3 0 16 0;
#X connect 4 0 6 0;
#X connect 5 0 6 0;
#X connect 8 0 29 0;
#X connect 9 0 10 0;
#X connect 11 0 17 0;
#X connect 12 0 21 0;
#X connect 13 0 22 0;
#X connect 14 0 18 0;
#X connect 16 0 7 0;
#X connect 20 0 6 0;
#X connect 25 0 24 0;
#X connect 25 1 11 0;
#X connect 25 2 13 0;
#X connect 25 3 14 0;
#X connect 25 4 12 0;
#X connect 29 0 0 0;
